# stages:
#   - build
#   - lint
#   - test
# #   - deploy

# # This template helps maintain consistency across jobs.
# .base_node_job:
#   image: node:trixie-slim
#   interruptible: true # Allows a newer pipeline to interrupt an older, running one.

# .base_python_job:
#   image: python:3.11-slim
#   interruptible: true

# # Reusable cache definition for Node jobs.
# .node_cache:
#   cache:
#     key:
#       files:
#         - package-lock.json
#     paths:
#       - node_modules/

# # Reusable cache definition for Python jobs.
# .python_cache:
#   cache:
#     key:
#       files:
#         - requirements.txt
#         - requirements-ci.txt
#     paths:
#       - .venv/

# # -------------------- BUILD STAGE --------------------
# node:build:
#   stage: build
#   extends:
#     - .base_node_job
#     - .node_cache
#   script:
#     - npm install
#   artifacts:
#     paths:
#       - node_modules/
#       - dist/
#     expire_in: 2 hours

# python:build:
#   stage: build
#   extends:
#     - .base_python_job
#     - .python_cache
#   before_script:
#     - python3 -m venv .venv
#     - source .venv/bin/activate
#     - pip install --upgrade pip
#   script:
#     - pip install -r requirements.txt
#   artifacts:
#     paths:
#       - .venv/
#     expire_in: 2 hours

# # -------------------- LINT STAGE --------------------
# node:lint:
#   stage: lint
#   extends: .base_node_job
#   needs:
#     - node:build
#   script:
#     - echo "Linting JavaScript code..."
#     - npm run lint # Removed sleep and placeholder output
#     - echo "Linting complete."

# python:lint:
#   stage: lint
#   extends: .base_python_job
#   needs:
#     - python:build
#   before_script:
#     - source .venv/bin/activate
#   script:
#     - echo "Linting Python code..."
#     - flake8 . # Removed sleep and placeholder output
#     # - black --check . # Uncomment this line for Black formatting check
#     - echo "Linting complete."

# # -------------------- TEST STAGE --------------------
# node:unit-tests:
#   stage: test
#   extends: .base_node_job
#   needs:
#     - node:lint
#   script:
#     - echo "Running JavaScript unit tests..."
#     - npm test # Removed sleep and placeholder output
#     - echo "Unit tests complete."

# node:e2e-tests:
#   stage: test
#   extends: .base_node_job
#   needs:
#     - node:lint
#   script:
#     - echo "Running e2e tests..."
#     - npm run test:e2e # Removed sleep and placeholder output
#     - echo "E2E tests complete."

# python:unit-tests:
#   stage: test
#   extends: .base_python_job
#   needs:
#     - python:lint
#   before_script:
#     - source .venv/bin/activate
#   script:
#     - echo "Running Python unit tests..."
#     - python -m pytest tests/ --cov=src/ # Removed sleep and placeholder output
#     - echo "Unit tests complete."

# deploy-job:
#   stage: deploy
#   environment: production
#   script:
#     - echo "Deploying application..."
#     - echo "Application successfully deployed."
